{"ast":null,"code":"const R = require('ramda');\n\nfunction findPath(primitive, object, path = []) {\n  for (const [key, value] of Object.entries(object)) {\n    if (value === primitive) {\n      return [...path, key];\n    }\n\n    if (typeof value === 'object' || typeof value === 'function') {\n      const newPath = findPath(primitive, value, [...path, key]);\n\n      if (newPath) {\n        return newPath;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction composeLense(prim, obj) {\n  const arr = [...findPath(prim, obj).slice(0, findPath(prim, obj).length - 1), 'state'];\n  arr.map(item => isNaN(item) ? console.log('index') : console.log('props'));\n  return R.compose(...arr.map(item => typeof item === 'number' ? R.lensIndex(item) : R.lensProp(item)));\n}\n\nfunction updateTree(prim, obj) {\n  console.log(composeLense(prim, obj));\n  const bool = !R.view(composeLense(prim, obj), obj); // console.log(bool)\n\n  const newState = R.set(composeLense(prim, obj), bool, obj); // let arr = [];\n  // for (const [key, value] of Object.entries(newState)) {\n  //     arr.push(value)\n  // }\n  // const Obj = {\n  //     a: 1,\n  //     b: [{\n  //             c:3\n  //         },\n  //         {\n  //             d:4\n  //         }\n  //     ]\n  // }\n  // const prop1 = R.lensProp('b');\n  // const prop2 = R.lensProp(0);\n  // const prop3 = R.lensProp('c');\n  // const compose = R.compose(prop1,prop2,prop3);\n  // console.log(R.set(compose, 123, Obj))\n\n  return newState;\n}\n\nconst tree = (state = [{\n  id: Math.floor(Math.random() * 16777215).toString(16),\n  title: 'item1',\n  icon: 'folder',\n  state: true,\n  items: [{\n    id: Math.floor(Math.random() * 16777215).toString(16),\n    title: 'item1.1',\n    icon: 'file',\n    state: false,\n    items: [{\n      id: Math.floor(Math.random() * 16777215).toString(16),\n      title: 'item1.1.1',\n      icon: 'file',\n      state: true,\n      items: []\n    }, {\n      id: Math.floor(Math.random() * 16777215).toString(16),\n      title: 'item1.1.2',\n      icon: 'file',\n      state: true,\n      items: []\n    }, {\n      id: Math.floor(Math.random() * 16777215).toString(16),\n      title: 'item1.1.3',\n      icon: 'file',\n      state: true,\n      items: []\n    }]\n  }, {\n    id: Math.floor(Math.random() * 16777215).toString(16),\n    title: 'item1.2',\n    icon: 'file',\n    state: true,\n    items: [{\n      id: Math.floor(Math.random() * 16777215).toString(16),\n      title: 'item1.2.1',\n      icon: 'file',\n      state: true,\n      items: []\n    }, {\n      id: Math.floor(Math.random() * 16777215).toString(16),\n      title: 'item1.2.2',\n      icon: 'file',\n      state: true,\n      items: []\n    }]\n  }]\n}, {\n  id: Math.floor(Math.random() * 16777215).toString(16),\n  title: 'item2',\n  icon: 'folder',\n  state: true,\n  items: [{\n    id: Math.floor(Math.random() * 16777215).toString(16),\n    title: 'item2.1',\n    icon: 'file',\n    state: true,\n    items: []\n  }]\n}, {\n  id: Math.floor(Math.random() * 16777215).toString(16),\n  title: 'item3',\n  icon: 'folder',\n  state: true,\n  items: [{\n    id: Math.floor(Math.random() * 16777215).toString(16),\n    title: 'item3.1',\n    icon: 'file',\n    state: true,\n    items: []\n  }]\n}, {\n  id: Math.floor(Math.random() * 16777215).toString(16),\n  title: 'item4',\n  icon: 'folder',\n  state: true,\n  items: [{\n    id: Math.floor(Math.random() * 16777215).toString(16),\n    title: 'item4.1',\n    icon: 'file',\n    state: true,\n    items: []\n  }]\n}], action) => {\n  switch (action.type) {\n    case 'OPEN':\n      updateTree(action.id, state);\n    // return updateTree(action.id, state)\n    // console.log(!R.view(getPathProps(action.id,state), state))\n    // console.log(state)\n    // return arr;            \n  }\n\n  return state;\n};\n\nexport default tree;","map":{"version":3,"sources":["/home/illia/addnote/front/src/Reducers/tree.js"],"names":["R","require","findPath","primitive","object","path","key","value","Object","entries","newPath","composeLense","prim","obj","arr","slice","length","map","item","isNaN","console","log","compose","lensIndex","lensProp","updateTree","bool","view","newState","set","tree","state","id","Math","floor","random","toString","title","icon","items","action","type"],"mappings":"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","sourcesContent":["\n\nconst R = require('ramda')\n\n\n\nfunction findPath(primitive, object, path = []) {\n    for (const [key, value] of Object.entries(object)) {\n      if (value === primitive) {\n        return [...path, key];\n      }\n      \n      if (typeof value === 'object' || typeof value === 'function') {\n        const newPath = findPath(primitive, value, [...path, key]);\n        if (newPath) {\n          return newPath;\n        }\n      }\n    }\n    return null;\n  }\n\nfunction composeLense(prim, obj){\n    const arr = [...findPath(prim,obj).slice(0, findPath(prim,obj).length-1), 'state']\n    arr.map(item => isNaN(item) ? console.log('index') : console.log('props'))\n    return R.compose(...arr.map(item => typeof item === 'number' ? R.lensIndex(item) : R.lensProp(item)))\n} \n\n\nfunction updateTree (prim, obj){\n    console.log(composeLense(prim,obj))\n    const bool = !R.view(composeLense(prim,obj), obj);\n    // console.log(bool)\n    const newState = R.set(composeLense(prim,obj), bool, obj);\n\n    // let arr = [];\n    // for (const [key, value] of Object.entries(newState)) {\n    //     arr.push(value)\n    // }\n\n    // const Obj = {\n    //     a: 1,\n    //     b: [{\n    //             c:3\n    //         },\n    //         {\n    //             d:4\n    //         }\n    //     ]\n    // }\n\n    // const prop1 = R.lensProp('b');\n    // const prop2 = R.lensProp(0);\n    // const prop3 = R.lensProp('c');\n\n    // const compose = R.compose(prop1,prop2,prop3);\n\n    // console.log(R.set(compose, 123, Obj))\n    \n\n    return newState;\n}\n\n\n\nconst tree = (state =  [\n    {\n        id: Math.floor(Math.random()*16777215).toString(16),\n        title: 'item1', \n        icon: 'folder',\n        state: true,\n        items: [\n            {\n                id: Math.floor(Math.random()*16777215).toString(16),\n                title: 'item1.1',\n                icon: 'file',\n                state: false,\n                items: [\n                    {\n                        id: Math.floor(Math.random()*16777215).toString(16),\n                        title: 'item1.1.1',\n                        icon: 'file',\n                        state: true,\n                        items: []\n                    },\n                    {\n                        id: Math.floor(Math.random()*16777215).toString(16),\n                        title: 'item1.1.2',\n                        icon: 'file',\n                        state: true,\n                        items: []\n                    },\n                    {\n                        id: Math.floor(Math.random()*16777215).toString(16),\n                        title: 'item1.1.3',\n                        icon: 'file',\n                        state: true,\n                        items: []\n                    }\n                ]\n            },\n            {\n              id: Math.floor(Math.random()*16777215).toString(16),\n              title: 'item1.2',\n              icon: 'file',\n              state: true,\n              items: [\n                  {\n                      id: Math.floor(Math.random()*16777215).toString(16),\n                      title: 'item1.2.1',\n                      icon: 'file',\n                      state: true,\n                      items: []\n                  },\n                  {\n                      id: Math.floor(Math.random()*16777215).toString(16),\n                      title: 'item1.2.2',\n                      icon: 'file',\n                      state: true,\n                      items: []\n                  }\n              ]\n          }\n        ]\n    },\n    {\n        id: Math.floor(Math.random()*16777215).toString(16),\n        title: 'item2', \n        icon: 'folder',\n        state: true,\n        items: [\n            {\n                id: Math.floor(Math.random()*16777215).toString(16),\n                title: 'item2.1',\n                icon: 'file',\n                state: true,\n                items: []\n            }\n        ]\n    },\n    {\n        id: Math.floor(Math.random()*16777215).toString(16),\n        title: 'item3', \n        icon: 'folder',\n        state: true,\n        items: [\n            {\n                id: Math.floor(Math.random()*16777215).toString(16),\n                title: 'item3.1',\n                icon: 'file',\n                state: true,\n                items: []\n            }\n        ]\n    },\n    {\n        id: Math.floor(Math.random()*16777215).toString(16),\n        title: 'item4', \n        icon: 'folder',\n        state: true,\n        items: [\n            {\n                id: Math.floor(Math.random()*16777215).toString(16),\n                title: 'item4.1',\n                icon: 'file',\n                state: true,\n                items: []\n            }\n        ]\n    }\n], action) => {\n    switch(action.type){\n\n\n        case 'OPEN':\n            \n            updateTree(action.id, state)\n            // return updateTree(action.id, state)\n            // console.log(!R.view(getPathProps(action.id,state), state))\n            // console.log(state)\n            // return arr;            \n    }\n    return state;   \n}\n\nexport default tree;"]},"metadata":{},"sourceType":"module"}